function [Y,Xf,Af] = tp06e9db8a_a5c9_4209_9459_b2c9517fe1d5(X,~,~)
%TP06E9DB8A_A5C9_4209_9459_B2C9517FE1D5 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 29-Aug-2017 20:47:24.
% 
% [Y] = tp06e9db8a_a5c9_4209_9459_b2c9517fe1d5(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 20xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [-1874.99930442496;-5454.91534726368;-869.204807020144;-780.471896742376;-460.205555216351;-234.31060487846;-540.291178237134;-572.142715533789;-620.900292310252;-263.800490630852;-210.820779921782;-212.784015206653;-286.590370604324;-169.741999038739;-193.663740648595;-218.521589353917;-225.820325675021;-120.21836786042;-258.858847398819;-176.115238468629];
  x1_step1_gain = [0.00034254044244578;0.000277480746585881;0.000806013241167018;0.00156677380853904;0.00168393926281428;0.0026904652788907;0.0019808499204541;0.00236361816544284;0.00245784730269613;0.00195235680232596;0.00282106579415895;0.00424658079482961;0.0031726176926076;0.00555458687461897;0.00429724736478089;0.00484270636687468;0.00333931608099048;0.00598913897545081;0.00384783002604034;0.00642488839732242];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [2.3205140436709443819;-3.4097044728431904481;0.55604202302219973841;0.51360315551627810926;-0.27028300564670337813;0.29249960469873320656;-2.4175039225377266128;3.7940557007115285337;-2.3695773975923350996;1.1507445272207212916];
  IW1_1 = [1.491643471471199911 -1.1925898906294059021 2.3552069814734775122 0.75691008857645147856 -0.35875708682426055152 -1.6080744924755987491 1.1104555194529794893 0.048945940729779924272 -0.37219455111688398707 0.09475292763502683735 -2.2652294951662277356 -1.8722782830626993889 0.96969486384258729572 0.32953679937670382616 0.66879514209346813125 -0.52642919778349073212 -0.70036964985916949633 0.062449898209781716518 -1.3111934419413271424 -0.0047647460638056155641;-2.8335946536004801288 -1.4000893108676719656 -0.69425079015197210808 -1.6699836209129157449 -1.2051046209175093615 -1.8070188302905547673 -0.32166747434501957725 2.3110738286337175751 -0.033307215686093363805 -0.90731718889008683426 -1.9284822731199064982 0.14207108793454481521 0.58799214479678940659 -0.10057681991295785995 1.751840927587628105 -0.40626431770489668249 3.1674404952476131747 -1.4197937148477530744 1.2818666964392793073 0.80451675977635606074;4.0159112294586885028 -1.9172361429084108231 1.1875106966932700292 0.74078698271985110591 0.45496178643762757998 -2.697222207594788923 0.51518495816429299428 -1.5062124891811676797 -1.6751442342920701556 1.8331122797372716438 -0.28533980007507553367 -2.89922601532243851 -0.3768407258441711094 1.9615113099253267404 0.34624739871450976869 0.47886200815809787379 -0.66083048529558130468 0.70536794337975139424 -3.0156527919618301148 1.6410404210433202632;-1.5683429822277177301 -0.90086355115888472334 2.9317716599204795003 4.3231736675873566611 3.9810451461107141391 -1.7779449337788832963 -0.15427311617684405509 -2.2756937288292680144 0.2130237828269627709 -1.0796924979012367807 2.2999864537590819502 -2.2952181710595831454 1.9266589402330196457 0.27851966603729477745 3.3849788862661740474 2.3090949279382293469 2.1415401045489228515 -0.40027749484807012559 0.60765161827260372185 -0.82522839630270516942;-0.6636502173277100125 -3.4108296547455601022 2.1505758184543082301 -0.62652497981703547669 0.17366469388430572085 -0.51788345617851450076 0.10471071074313970106 -0.9276861024747654616 -0.74793903096880987036 -0.24714261852230279271 -0.139053186363176845 -0.044666455540864083429 -0.74124400879392793318 -0.9844018145044011181 1.593257624921881499 3.252283200955285114 -1.2310301484257215598 -1.077434024061248552 0.09339915800877314489 0.53154107832917896204;-3.1348827323706918158 -2.8999599091249823601 -3.3438219070279417977 0.55332720366926158029 2.4851651474182685497 0.71353680201803060257 2.2039916137280499697 -1.0800252680391659865 1.2270750325185351137 -0.057646310211809270729 -0.6821745533385461524 0.090251927863630690418 -0.98370403856084165373 -0.0094021668310226100967 -2.2288614973808611452 -0.71117740786026151234 1.2255954410378655517 0.40809231759809472262 -2.6147107663871600458 0.44397872648329772538;-2.7355683103521775124 -3.0963908869305356575 0.26557248776669772905 -0.56396451430927074799 -3.4269001845710613807 -0.97804433181250327589 -1.2718618768660847618 2.9725616466944986271 0.4999419689853971116 2.9840451202334041803 -1.4618836641133234888 -1.7398865420693567785 1.6412415176998660371 -0.25622453024080305006 -1.171780331789568308 -0.11428332390666480489 -2.4235004604570722364 0.4479577531543345037 -1.0297093480922059339 1.0886950156386983046;-0.12117662324732952905 1.2307970386866318169 -1.7803151994944694803 1.2207333238405306819 3.6280406670890941179 0.94437658542535007911 2.7935693537025749755 -2.8583533084666439272 -2.8365766278291619784 5.7458945506078658028 0.52581300409226361392 -3.3317286898902209735 -2.3698098722822362738 -0.4016181823718475985 -1.0735640517748745726 1.5649299932576365979 -1.2214354239904985366 -0.39923107754986608686 -5.8137126038018456242 -0.84002698446506074426;1.3866764101120028219 3.3694378528701323106 1.4883036140078593768 -3.3108715829222101767 3.4804859027291250584 -4.0734433616996312821 -0.9337608710922722377 0.98456025390572998734 -0.98280050710271982251 -0.25935864545583292573 0.9571086208317109989 0.96854614571560260217 0.16918511709414615907 -1.5141016744068807043 -1.1010543981344163011 0.34434839599683608746 -2.9215591998902894488 -1.5343753618571918107 0.68537988718667375299 1.1140959987629179828;-1.0474999584292197241 1.7840959767637043498 -1.4348202380047436755 2.8461274117803556649 0.34915320446112568797 -0.25582743582243672176 -0.085820715224600760407 -0.6692092488482870305 0.7925716075794291271 -0.74385376997396468468 1.8722858839317457758 0.46361184661217536007 -0.10913660223569184027 0.25246169667179901852 1.3258396594267853885 0.21918744929133698873 1.4530793058267339468 -1.2212776992775689067 0.44992670102734494408 -0.67916526843048852236];
  
  % Layer 2
  b2 = -3.6070802799655274917;
  LW2_1 = [-4.7161112624824932382 -5.3662683207201773428 -4.5350893157496487973 -3.0534278760646724749 -4.1017145032058826004 -4.470626414419172967 -3.1140207167894171647 4.7074354971375385048 3.59101838253391481 2.070600496143744973];
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = logsig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(2,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Positive Transfer Function
function a = logsig_apply(n)
  a = 1 ./ (1 + exp(-n));
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

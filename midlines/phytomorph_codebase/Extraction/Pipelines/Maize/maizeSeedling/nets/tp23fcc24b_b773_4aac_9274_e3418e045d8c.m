function [Y,Xf,Af] = tp23fcc24b_b773_4aac_9274_e3418e045d8c(X,~,~)
%TP23FCC24B_B773_4AAC_9274_E3418E045D8C neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 03-Sep-2017 17:35:59.
% 
% [Y] = tp23fcc24b_b773_4aac_9274_e3418e045d8c(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 20xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [-3289.74882371951;-1498.84051842406;-977.81800685793;-2473.29678142316;-579.957172766835;-720.15190943002;-474.399996307268;-522.242249232239;-420.226401116415;-417.475292942103;-306.200888877844;-388.367090162114;-291.39584507413;-376.411586177089;-312.430500619518;-321.397730757898;-231.052600123317;-238.536185311159;-300.292838284033;-183.531087713646];
  x1_step1_gain = [0.000377693156370527;0.000577456077299579;0.000763241531595339;0.000656175798642299;0.00207889551360641;0.00132289146378878;0.0021050120182425;0.00188095402340317;0.00237297796658717;0.00258788322162196;0.00300539389135356;0.00292429008303262;0.00346972867854873;0.00273531031890041;0.00311974005335505;0.0034650851615904;0.00478122411926408;0.00448287798328079;0.00393490060972022;0.0052117714716068];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [1.8600465063111799591;-1.7667050405286834902;-0.90236591429707224687;-1.5334094132038396108;-2.7951119851010020056];
  IW1_1 = [-0.012158946141557384207 -0.053986481364864488675 0.069323885971652426941 0.4822838348606850456 0.03450503151632453025 0.41172643346845000378 -0.30192880274973454835 -0.58170269565627807928 0.48672301148677055149 -0.15124995181289579982 -0.12674622530736176507 -0.13932163851008855238 -0.36858963872585370769 0.29905895830456463713 -0.075972192824896700447 0.076915228160238088839 0.3201905348617479774 -0.46884416410564339062 -0.26170898980661178035 0.48083542381465860238;2.6426894535309939371 0.2672357100993316692 -0.45467429239409035135 1.2879140356767113662 -1.5852777495052727819 -0.27350197894777500407 1.3320885269023965414 -1.9545816945869824988 -1.6755098464035176331 -1.0773795160982593266 0.47808749794033533753 0.17710965057919098031 0.96856144737086480312 0.24829407859859936591 0.10796833998477470273 -2.6473212999405215662 1.1251396608226309493 0.6672552064516799053 -0.53278124979630081537 -1.8520279619675692473;1.6237193169482500021 1.5948668986391361102 -0.66497340421859252313 2.8869711382828784352 0.67118457314845270112 0.012086783111612382779 -2.5836685612798038214 -1.2676253234807219883 1.7458859653058775852 -1.7425116581537951621 -0.3422589163211728347 -1.1782213665583627371 1.1655384547982006183 0.31754728942080656662 1.3320056126863490942 0.79916760117262164442 0.47920861924169155799 0.32855432958217695161 -0.31223937638286702878 -0.69137190431952944003;1.8764011501090900325 0.49969594792928068161 -0.18558282199240941357 0.21187085391687096592 -1.9657264713645068444 1.5160193885320176754 -1.1687337201693697164 -1.1321975405829716177 1.8581047315441154844 0.026892846155537900033 0.52910587996633995367 -0.36549512357467023316 -1.3101451555445364772 0.13744369961323654739 0.39734716228473476729 -0.10306520430981729042 -0.30629499689475220281 0.79230941565719781305 0.36316575859715338748 1.0810525608778926987;4.561278829440443161 2.1597426005484567924 -1.1072178660995399824 2.7311008456121514953 0.86121652316006058747 -0.36656458361781019129 -0.27780455839749107483 -2.4999287224722435141 1.3103387286286714009 -0.40591256664534824949 -0.41814555495352723202 -1.065635606550637382 0.25460835377997886875 1.502708534914468208 -1.5635138483026040923 -1.1077567049438317159 -2.3136427687448843926 -2.6155804757452756348 -1.7213438479590068564 -0.15743909840965492064];
  
  % Layer 2
  b2 = 0.96776901941915360883;
  LW2_1 = [0.6357630283356550116 6.3328666409451122021 6.5328683735487977913 3.1408790571257338975 7.61619295111240735];
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = logsig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(2,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Positive Transfer Function
function a = logsig_apply(n)
  a = 1 ./ (1 + exp(-n));
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

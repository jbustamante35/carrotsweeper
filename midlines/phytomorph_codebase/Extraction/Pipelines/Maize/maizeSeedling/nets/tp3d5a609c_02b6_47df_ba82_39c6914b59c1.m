function [Y,Xf,Af] = tp3d5a609c_02b6_47df_ba82_39c6914b59c1(X,~,~)
%TP3D5A609C_02B6_47DF_BA82_39C6914B59C1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 31-Aug-2017 16:48:55.
% 
% [Y] = tp3d5a609c_02b6_47df_ba82_39c6914b59c1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 20xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [-1874.99930442497;-5454.91534726369;-869.204807020144;-780.471896742374;-460.20555521635;-234.310604878461;-540.291178237134;-572.142715533789;-620.900292310246;-263.800490630848;-210.820779921784;-258.183122033539;-343.803894881912;-169.741999038737;-193.663740648593;-194.470619647337;-225.82032567502;-213.719449945757;-260.914631799836;-135.174215342508];
  x1_step1_gain = [0.00034254044244578;0.00027748074658588;0.000806013241167019;0.00156677380853905;0.00168393926281428;0.0026904652788907;0.0019808499204541;0.00236361816544284;0.00245784730269615;0.00195235680232595;0.00282106579415898;0.00424658079482946;0.0031726176926076;0.00555458687461902;0.00429724736478088;0.00484270636687463;0.00333931608099049;0.00598913897545098;0.00384783002604034;0.00642488839732233];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-1.5423868372058862075;-1.1256336058849156778;-2.2095694138987882482;-1.6641950731419086207;-0.68719831530876485104;-0.79683454043708368264;-0.40917772339518293512;-1.1142595483301398485;-2.6957482393315990166;3.1499011602819844136];
  IW1_1 = [-0.36751916572959342222 1.1725834638943031241 -0.5377821272991551993 0.17504691774000141757 0.3529772656831169364 0.52968936644056296981 -0.3800795691091572448 0.002151070663674775011 -0.59757381287726996089 -0.74389823326335535736 -0.0060022524289391893104 0.73830518539042633286 -0.23257912340759354097 0.42106421052030673646 0.80414634760920922218 0.17908738072201541014 -0.12821580329292836531 0.27174668428200415837 0.14240815839943135601 0.18232202481903003743;0.48737052696145810593 0.20948154810154581695 -0.79496248294548688129 0.23354700109302614641 0.060961675565242762209 0.054590903270235753564 -0.055276511580029823179 -0.59709795916130714577 0.15573175395790439524 0.34228544550251205347 -0.56681607939650624495 -0.16993178440314640754 -0.27334964066126654636 -0.84844481493574819275 -0.26457997044108172435 0.26576281496743225929 -0.37767664911604070799 0.32980835412089343217 -0.0059010386109490369638 -0.43129844420126944859;-0.014709792212333485176 1.6375102035741546658 -0.34332964990776304592 1.0941158718132926175 0.19657599729155519896 -2.1514551524969283136 0.2367400701923298989 0.14822231589367818039 -1.3090381951114986592 -0.76812835631769360578 1.3965917407430574748 2.0183957889765813398 -0.33830778658731802677 -2.8432797926702995106 0.20209620685566692666 2.0727491281906318399 -0.93510514267364985841 0.57061064306169662075 -0.64557763256082423275 1.6685565167713944934;-4.2172691593932762899 -5.2768935963569729708 0.59600266303623006259 -0.73297248783503676783 -2.3575940277751277208 1.4944677275405771066 0.057219739085680905444 1.2900572233390164012 3.5612348092441989955 -0.61546175920618684252 0.60208839500310329385 0.42147039973128097579 -1.1416493976779880093 -0.49934201740611777742 0.25937819786468918615 0.044025678881726842961 0.23569157175236465918 -0.64917753097244268456 -0.72617545904354108277 -0.75423951241892972508;-0.74018479941733805738 4.5185350777357005114 -0.63628898821938639774 -0.44454273307772412815 -0.40539981325473478657 1.0838027109489993816 -0.5141019925707114302 -1.9712224945581688917 0.56781622952370347512 -0.45067047295211037916 0.63407147363033122822 -1.2542998588715550401 -0.85079170244678115065 0.72764514747149033891 1.143720104324377651 0.25838372479123955516 -0.29570823331128198719 -1.0074977004010337023 -1.0665674966165714643 0.95803961145503613306;3.4927935064442912072 3.2581310362023390148 1.092361624924260477 -3.0716865720397614758 1.7563747157109126373 0.43226177674323107425 -0.79449199831592165477 0.57628424563822133742 1.7609201073822760009 -2.4838086280174849207 0.20925865547162794678 0.16520282189002163942 -1.553327750639666549 -0.75288441628579994003 -2.1907470261394133004 0.72091846084251842708 -2.4533430646811549281 -0.29388898423826476103 -3.5146768087272755032 -1.1109260978282449184;-0.39544814307634318373 0.29000379199805725872 -0.18790032335281955933 0.39599034004475974768 -0.067387607930342693918 0.32891962767958110581 -0.52642355705195387205 0.63098021998722753079 -0.2743002254636440207 0.2265072145293959005 0.037639406148315471268 0.74183587506461978744 -0.29199522760137414101 -0.51207359790611461925 -0.13839943634471690848 0.60558817742650861149 0.16524076902593320959 -0.014926705532093737308 -0.27646943736206502917 0.56887790648414782169;-1.8140805511132991334 2.2271564262270122647 0.13456303042106126933 -0.77765635135701915992 1.863652956879945588 -3.1436809758446777607 -0.044756623814034279807 -0.99187912570081171459 -1.4007362814782247096 -1.3283962286843757905 0.3326004080772095306 -0.096611417706005800476 0.54738032317052609521 -2.3426938243343591317 1.5504091210090138464 -0.53765881574513485486 -0.72771733510120428789 0.044741472911651439248 -1.6219603339390751273 -0.96049733051135177675;-1.76866302403811404 1.3710052279904820782 -0.67094924388738319543 1.671128447827764818 -0.33466770532448752995 -0.46012164254334247948 -0.087589704640929050283 -1.8125892873562614582 -0.040408566361855767501 -1.0189627993276724194 1.5594506054136261231 -0.60431203626052210076 -0.95553415804660701838 2.0717165040553560118 -0.10820900676053252232 1.2949877991632838814 -0.20256378643048678079 1.5700780350828857923 -0.62167271270047930187 -0.80738629972442488292;2.1822921416010911955 0.8930363252597883772 3.0519788815623418721 1.5833094827186846576 1.7196004350760030199 2.0263120484579864033 -0.12110013581394031557 -2.1605574847688329143 -0.7073159012045968641 -0.57280187616298938735 -0.04544970505948873335 -0.1849502743775342517 -1.5754090769657274063 0.48168934824257797489 -2.7106579698209287699 -0.87827916450882936861 -3.581698476783776286 -0.85665008616505566863 -0.90805498572834453253 0.39837774492513405855];
  
  % Layer 2
  b2 = -1.1368278056536063048;
  LW2_1 = [1.5053382069083300898 1.6626265587030817361 5.0357973147214547538 -9.1220482651405809804 4.6221886709824664408 7.4491857853459277905 0.69680998153237183601 3.9454910245688927795 4.1776010485386914084 6.8740568182660277685];
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = logsig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(2,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Positive Transfer Function
function a = logsig_apply(n)
  a = 1 ./ (1 + exp(-n));
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

function [Y,Xf,Af] = tp8a77bb1b_42db_44be_a25e_7384d41a9fb3(X,~,~)
%TP8A77BB1B_42DB_44BE_A25E_7384D41A9FB3 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 31-Aug-2017 14:54:34.
% 
% [Y] = tp8a77bb1b_42db_44be_a25e_7384d41a9fb3(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 20xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [-1874.99930442496;-5454.91534726368;-869.204807020144;-780.471896742376;-460.205555216351;-234.31060487846;-540.291178237134;-572.142715533789;-620.900292310252;-263.800490630852;-210.820779921782;-212.784015206653;-286.590370604324;-169.741999038739;-193.663740648595;-218.521589353917;-225.820325675021;-120.21836786042;-258.858847398819;-176.115238468629];
  x1_step1_gain = [0.00034254044244578;0.000277480746585881;0.000806013241167018;0.00156677380853904;0.00168393926281428;0.0026904652788907;0.0019808499204541;0.00236361816544284;0.00245784730269613;0.00195235680232596;0.00282106579415895;0.00424658079482961;0.0031726176926076;0.00555458687461897;0.00429724736478089;0.00484270636687468;0.00333931608099048;0.00598913897545081;0.00384783002604034;0.00642488839732242];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [2.6927582341045650516;-2.8637300018911791;0.44983453472046452948;0.76385041529497077484;0.28117876586454415566;-0.43363698106254000564;-2.1978560633692918458;2.8860873542571869876;-2.0746116256179756299;1.5510367277610881409];
  IW1_1 = [0.90609608575456557222 -1.3547009468636252993 2.8148668496176934006 0.52918046281856978563 -0.16746524804248896778 -1.5040677478221533558 1.0883384465925201035 -0.17180190170053660781 -0.28215729062571698327 0.79868953707619683158 -2.489622608783229829 -1.9948889034492174321 0.969931205453981371 -0.25325330077860525035 0.87141770322135869709 0.12113772511845524726 -0.12331926658306588407 -0.15045579349810536685 -1.8161002465294826536 -0.54671097282666947237;-1.4389528131278641609 -0.056718019931572653813 -1.8835115004676046269 -1.0335217772535474356 -1.4282385910623653924 -1.7942053683545697851 -0.7293620581606111708 2.1135139355295913255 -1.0274018740400265859 -1.3574126389210097177 -1.0468899027927833778 0.15888765420648873206 0.5179614816159635593 -0.069117184328289227313 0.65918805765935040153 -1.5005985890531925442 3.4260111498355301229 -0.60494212805514924192 0.77517609189083513943 0.79277842983410007349;4.0132274371262788293 -1.4991084370108491708 0.57618673516827656478 0.87382514288846202533 -0.24674834717569552045 -2.5366069808719320378 0.57343418637686893735 -1.5804935645238813446 -0.86082095369415279063 1.9970546218666698213 -0.19486575163376548825 -2.5703610126889597787 -0.0061102296744882196242 1.7264188189080902358 0.3182519797918975657 -0.082469172313523839146 -0.73445966625537173478 1.6393249749217926325 -3.1688803367458873161 1.2499156097802408549;-1.4466724494977674098 -0.53200316405516978602 2.0647966497580605427 3.4085810051075364768 3.7031718909706698994 -1.1674268342876963356 0.085518626283331622417 -2.71994745593041376 0.24499942510393396544 -0.79081053487635899479 1.6594118874351821979 -2.0585354886024544996 1.6323361726226541801 0.34748313512210243781 2.6801562718689035947 1.6483178561588351929 2.2195883584301254743 -0.33731619891968867009 0.18522628103255595056 -1.1329843670207224715;-0.45496393270035856427 -3.4640744669831047275 2.2869206758841840177 0.22066380087157630441 0.14842943553730589268 -1.4616971643960638971 0.37573140716731362465 -1.0216480562584708824 -1.9478069395701362865 1.005628395098757899 -0.68423275601164845749 -1.2774969199426637889 -0.36297764473353943959 -0.44836531867352319436 1.0372628963073251551 2.7826414336687199658 -1.1747033770366979155 -1.7412640299810617783 -0.59957021979013136459 0.36030778950195002652;-3.1298200462484433437 -1.7232461836547847689 -2.3515396775316546041 0.3459163428383086325 2.8321836486512790287 1.5497449342466085298 1.3770278341373587416 -0.054103767109237352328 1.8029964997672358606 -0.20386663343199754039 -0.43974633293403803114 1.4663949318391533705 -1.2210394943549420788 0.76086292316504910982 -2.1442644983085439314 -1.482865870780339046 0.28347747858996263925 -0.26678499590542559261 -2.3458699772471898193 0.7779702327819877361;-2.6546366759136676983 -2.6843635063783590766 0.74548053396446023466 -0.68586699451224164559 -2.8685591172364039991 -0.79469005331593178809 -1.3460125524641808337 2.7270161170730577993 1.0273964862663724773 2.3452975196365515309 -1.4135178202118809931 -1.3784776474651136979 1.5536250979429480079 -0.77522331482153339355 -0.19600636158260359432 0.27780418200967982312 -2.7920241853279752497 0.69528409444053895783 -0.42323226314617834465 0.48276281005406906921;-0.75602035622949348426 0.63499348123027310464 -2.9220017768654424906 1.5109187382897857344 3.5225443339044737456 0.7555190782823548723 2.9768638827418905102 -2.6779245571622491973 -2.8301408568211892103 5.0197724979203881546 0.17790314873016549457 -2.8476213713143496697 -2.0840176352062376175 -0.4126218509332035822 -0.94229353651075953291 0.67996633108099147069 -0.95983751280768758729 0.17020482796263633474 -5.54611434897139155 -0.49524787856624691296;2.0200539319381185521 3.7445862171063608592 1.1142483395014333158 -2.2887565368711038083 2.2043512942935219456 -2.4035365024613546403 -1.4187545127273635259 1.5095568668699672621 -1.2500621098418043253 -0.073340692869136747678 0.7191413814415060779 1.4092248930985000754 -0.34072005876640665267 -1.0307792357062606214 -2.4804085840651857175 -0.81612287285725992891 -2.6052821824308129983 -1.2231896641109143431 0.068580745396222594912 0.37601823964335107098;-1.4861471755803825623 2.2108074554560084302 -1.8106519280333854827 3.0185820655059951712 -0.30451803812390859649 0.3548440072427663794 0.073935265565771526863 -0.31647172375622290019 -0.12659756563927423989 0.49396259711321416352 1.6326414047026736043 0.188435724777772734 -0.24879544848207890695 0.83820148888353751548 0.60706771764286293624 -0.65475303384383032324 1.7643566912341064334 -0.95315690395474028662 -0.57368102341390569965 -0.89865664245256360321];
  
  % Layer 2
  b2 = -2.9144086835823905801;
  LW2_1 = [-5.3611448302555713141 -6.1002202656368149647 -4.8415010741440056563 -3.922371164052833592 -4.4607922592813844531 -5.5847711341658250461 -3.9546518402196295661 5.3225721077024541472 4.5000571465348837563 3.2316987220414699067];
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = logsig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(2,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Positive Transfer Function
function a = logsig_apply(n)
  a = 1 ./ (1 + exp(-n));
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

function [Y,Xf,Af] = tp94e6d407_e992_4708_96c2_5d2a3fda41d1(X,~,~)
%TP94E6D407_E992_4708_96C2_5D2A3FDA41D1 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 31-Aug-2017 14:37:46.
% 
% [Y] = tp94e6d407_e992_4708_96c2_5d2a3fda41d1(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 20xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [-5432.21511079255;-2285.79907029682;-834.320338899993;-451.327248716539;-690.442124301674;-440.923810847592;-781.659803211371;-311.516810675614;-659.850047510503;-416.874768568229;-250.644035779583;-266.728630237185;-284.166721828044;-200.812705665937;-235.257771107122;-287.447714627185;-270.705877196908;-276.019527491453;-178.529888662613;-167.395512112043];
  x1_step1_gain = [0.000193639844679507;0.000635136090067476;0.00107257204462677;0.000992521373387896;0.001400986781616;0.00179249040902968;0.00152180852073822;0.00263160812648062;0.00198686103343281;0.00250748142155721;0.00458743324706858;0.00371176793861517;0.00296778207281902;0.00448915093377841;0.00365879017755077;0.00377014651183398;0.00363538636865051;0.0042925850304542;0.00587388837253316;0.00612684175841685];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-0.86939992445358937889;-2.7879252817816300158;1.1997184415118367085;-2.8080695227886103282;-0.80173549078631733966;-0.30130045887223000367;-1.7832619762439598787;4.0828085107576201906;-0.68399243072492599271;2.6840982819372478652];
  IW1_1 = [3.0552503065103304714 0.97942303642963490784 1.6562892162145506081 -2.5621669045098323103 1.6778615353427837054 -0.76743842449665600203 -2.5828050992930462471 -0.96506016716375919717 -2.314004938957246349 -0.7923554764883784518 -1.7227657803881855081 -1.417045854773007596 3.1632907592108825412 0.43304108315156092379 0.21899534795065667137 -0.079776365113996092204 -1.0500129809995395469 -1.8320345276832081804 -0.35122983465665447156 0.27701187105510760578;0.26364457552861586542 1.436560229702599889 -0.041427122633494892212 -1.8449780597736549215 0.67965102035388491597 -1.7103795865798825382 -0.10173036175541778914 0.87887477670875069347 1.0726805460650838953 0.88324406458071402781 -0.53595564580792653953 -1.3247876743804380961 -1.3381299212175301605 0.36948018005849803114 1.7046606604362448678 0.59620711421496941362 0.41991587831023902133 -1.415681000095686537 -2.1022567720857727736 0.46740586252057508831;-4.7009822619741896688 0.019763934893200697795 -2.0934476789613474246 1.9303841691259515656 -1.3279804164432638114 -1.9763611641905305394 -0.83116836036715269209 -0.091094798548207484012 0.86249195994022931355 -0.21928852581517796483 2.4821777288778115178 0.91667869488107112108 -1.1461565409378819957 -2.2660319772783803494 -0.57504949638024338565 -0.73647247397691639748 0.37690880291451123174 0.62271626149720504806 -0.7486251685349728513 0.20581243985132324781;-0.038478742380310688997 4.7742398947821627075 0.28581621489122843727 -2.4580061276019962158 -0.3372035179575305075 -0.53816627075374423583 -1.2427354642513972482 -0.98593787952324241086 0.23681317426527476178 0.92929561290587836542 -1.2781855652954441371 -0.5908710366015926807 0.74790846909514108187 -0.92724375459265928612 0.11670429054858130757 -1.0197073375240093274 0.15743713046819263202 -1.1714837339665320481 0.29181417750262844679 -0.081012087538832350253;-0.64063265091383170269 -0.98377270666035065982 -2.7448152328190928984 1.9083613357682591705 -2.885997898936215833 0.10275327877601930782 0.59834919377550843667 1.1536456614301384693 1.337761634454977866 0.91777476614746700267 0.42987797310631925551 0.5944166338203081823 -0.93744198873002837491 -1.1980498414361893111 -0.25661290692977206662 -0.92060313991685371882 0.86037500987122095264 1.4348240514469716711 -1.0250532179999618521 -0.58565219182938277331;-0.30866143373237597824 1.2194031302173906628 0.62226466075946862411 -0.2049332072354771439 1.1973393333909525538 0.11822568388074339296 -0.4335736954013132971 0.0063475384774628017259 -1.4453580275021000734 0.19527162003821763037 -0.6680212429956118303 0.042320668004161274278 0.9022954897569356314 0.87451533108377133008 1.3822370740252534205 -0.59906869724546285561 -0.45663369301554762592 0.061424505925533771922 0.60069091723650835934 -0.21986414182872499046;-5.5034863053044205117 3.2520726770080128354 0.20084583469431305236 -0.87495840214877951269 2.3772440154252612032 -0.44238194016007109655 -0.62668092009105824669 -0.9439191598607454825 -0.87513059911307877758 -0.44102315863405422425 0.022098731264563138688 -0.019619181094332385079 0.11713781676663759246 0.68808967859098435493 -0.53278064476718689502 0.25282049597767042304 1.0378582948866186264 0.17759940912123642343 -0.069864774126153439404 -1.0963664450894328173;-1.42484389150393298 -2.0747591764458794827 -0.27185207147937973104 -0.29795868583109308414 0.65067377794672132119 0.15143354843552128686 1.3378992373109972469 0.47738458267696848303 -0.40948164879933124372 -0.84154031914719007457 -0.64336311902220499892 -0.58803677777731000464 1.0109963828995354174 0.2191073403186902524 0.035557670352992475082 -0.68695467687918732036 0.097477068806769623377 1.1011645732952306531 0.35185002340378679353 -0.71768158216943966909;-3.0344984222452509037 0.6208004207306688782 0.61195766547003871416 -1.0575761882856455909 1.9434249402451007072 0.76148871581536792252 -1.1076263298207493779 0.89125354730644168466 -1.5688428874744186903 -0.070669909000077149597 -0.24598121151931656714 -0.1994085088302927633 0.8267032621307928153 0.65424483424996371372 1.7134911779985197988 1.3393868257753280826 -0.71883532933028282397 0.85884796984079059268 -0.27905694905718292365 0.52750798844672530663;0.47773905908869623849 -0.0052095689434026627718 0.20712050344590202111 -0.62830589600627806401 -0.089423154544671201727 -0.2128052757209990542 0.58689274060741081218 -0.25905715772271542541 0.076278321306448765293 0.47960861360675732801 0.36422352376509442573 0.22771154990223679837 0.319900147178865224 0.4982286388389534082 -0.17487184065400557254 -0.30948318521703432893 0.17560602354862253627 0.70559949598670534954 -0.052917526998417341311 -0.051932916111560006867];
  
  % Layer 2
  b2 = -2.0983662550552484305;
  LW2_1 = [-5.967749389048640829 3.5801776380606686878 3.5377934677724862667 4.1987618368790053935 -3.7137911396959406574 -0.89528126419707809713 -5.2828119791546130912 -4.6625839186851054663 -3.3252659831393023282 -3.1770813595005167329];
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = logsig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(2,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Positive Transfer Function
function a = logsig_apply(n)
  a = 1 ./ (1 + exp(-n));
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

function [Y,Xf,Af] = tp9c14f534_aa77_44ad_84aa_883d967aaad4(X,~,~)
%TP9C14F534_AA77_44AD_84AA_883D967AAAD4 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 01-Sep-2017 01:22:48.
% 
% [Y] = tp9c14f534_aa77_44ad_84aa_883d967aaad4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 20xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [-4898.55695171487;-862.937878923585;-1028.71862143181;-451.710971542899;-692.538815519985;-441.043793232209;-783.667639824726;-450.026271289943;-656.555828069286;-380.160028036834;-256.518565057573;-259.432124024255;-384.146123020655;-202.979007080795;-313.06122328195;-302.321350914836;-296.419908591294;-275.821003918803;-174.982344511233;-155.930294068925];
  x1_step1_gain = [0.000192953812201724;0.000635170113819407;0.0010737117105794;0.000992967389065703;0.00140247416929524;0.00179426803546528;0.00152094087103249;0.0026247520165371;0.00199415494766511;0.00251075910029921;0.00454433874041185;0.00378662000738745;0.00302237737948988;0.00448879604138574;0.00366080733460341;0.00363057230533657;0.00381924645546849;0.00427537582274539;0.00592120551781341;0.00602422138644213];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-1.9456893512637518651;-0.74192510486694196459;1.7888506897722062927;5.8148366586422275404;-0.90138197966750610579;-0.48597145681528663985;-1.4117170521924311544;2.7150391119255630201;2.3224377753064486818;-2.3349929936499469463];
  IW1_1 = [0.049647115344065045894 0.02247733597795811486 0.37810061298826469489 -0.0072925596607660153614 0.099329415151605940371 -0.077486971358167539004 -0.57692125893238421774 0.24354228681038264659 -0.2525117028253898166 -0.3435654123082347855 -0.4024225080800258314 0.25966801830756042202 -0.24376581850012987718 0.48892953377115527802 0.58683432177102756722 -0.16079198495631244481 -0.53137056514820291131 -0.4826705823912413873 -0.29962459077152420184 0.57315731659837132472;-2.69565963420110144 -2.8861580402392190692 -1.1729800889441570622 -3.1676456573485363144 3.4727518179710266111 -0.13495882280720394863 -1.8355397801328150464 0.85891511099638495619 -1.2299669688298411341 2.1082963852532676796 -2.8096423059005006806 -1.1392927619721500143 -1.9768561200554259916 -1.1632897894591136545 2.4895416904179508144 0.96741785257279433452 -1.687122609101505466 -0.26275032840449397131 0.23496536491723249429 -0.028217097732219184603;1.2475047682506710256 2.9577135715551805539 1.4407759507442612357 2.1281154731765652421 -1.8603140152983013156 0.47776835270903122987 1.7304509687234419513 -0.64898084320038118555 0.10069537616468314523 -0.35897670984193702504 1.0779243845383921219 -0.3035887567140287957 0.80145877704538392994 0.8199674352343773176 -0.06227285831600928856 0.11905547602111150873 0.49314278697690588915 -0.5574106996925499713 -0.53894008362387746391 -1.1433424245188246182;-0.052396183524037714951 4.029064386707243095 0.23676811757328722341 2.4961671829121545585 -0.051474558399181510882 0.83413053146037174912 3.118324904784925522 -2.8709201473012897488 -1.5642188467995044032 0.89093058653664036761 -2.1991193951215315394 -1.3428602426872155995 -4.3515199416447867264 0.96482282013941822463 -3.2829895417182624051 0.17349187870110394094 0.83652802158601691218 1.3952729558169678636 -1.2741406951780840373 1.3349266554853405076;-1.0205186161842609849 -0.91558727762707459163 -0.81151024020607054332 -1.4230043617733794115 0.72427741369331644083 -0.021503254824179526133 0.071981840539784069932 0.033532933004871395832 -0.42692752791841387383 -0.25649700650125972778 -0.091525053515667628701 0.71493690296154799313 -0.0029651880976671574595 -0.74932013058514601589 0.035391953016102206675 -0.21582051678017544205 0.19362161147494741376 0.1585472991955818034 0.36318010398023309326 -0.32870435507140188802;0.19055448849354211793 0.34332763828440276965 -0.55811825024763417336 0.32812786710182723082 0.37375247483879059374 -0.0017233117483152317687 -0.31562030045871120043 -0.43244771384391961222 0.31140549414786466986 -0.26764281361310221508 -0.25466890117320778453 -0.38260569095145507967 0.10773851432524464422 0.21328740930944622978 -0.6427611244135825741 0.39838818875306036826 -0.31411494947148071999 -0.21406317502780930484 -0.17140623828046339105 0.56315170484015808494;-0.040643082482000908451 0.38189896262608280519 0.25864668663044493302 0.17378358529702050972 0.41542750191243399405 0.50258641494964706453 -0.48859059644587099491 0.20509170766991455248 -0.24089918982063138198 0.16176150351453555398 0.37777259952863678771 -0.41152329932937736778 -0.35308945753842785331 0.27114870216151965021 -0.11441111146671255339 0.24641852383175522068 0.083107026950953066802 -0.61292157898986165954 0.13606662032337066282 -0.39035295585060830748;-3.6556046199394360841 1.0754020484248179024 -1.2438274392864328011 1.2098108323490788241 0.32743665093493279361 1.356734587198452191 0.6900549751948725774 -1.1055206047775831824 -2.5803415117636476772 0.27873771533861124716 -1.6201581119759493887 -0.80062143917826555928 -1.3460980227528243081 0.53969575980507533686 -0.8877562292125518173 0.040391949812530428265 0.031835028722558278425 -0.6685726522630549562 -0.21999691525259126856 -0.26072858904825579884;-3.2422501825105638495 1.0817048502856980718 -4.4443319720041438714 -1.2182383875333888668 5.8165446454957061562 -0.78333101198594756731 -1.154423938689960627 1.8729899443934518999 -7.2959660830551467114 3.4914431799871725737 -6.6989080115054067122 -3.4210975256990034943 -5.0755486216519392073 -0.9244942084386589265 1.2431325182608639057 1.4266910060559769846 0.10660121995847238185 0.043363893040196582751 -0.41682895932024444097 0.41164514945492414189;-0.27269619190109589679 0.035546260307877566853 0.24523785584233423473 0.31252859729964627133 -0.055136009169410728215 -0.36055931420966907952 -0.5447945893027817954 -0.040759687284181174427 -0.15405068687686554463 -0.11280962571815837669 -0.0054479046287583231256 -0.28566253981732192546 -0.25379504944506536823 0.078545954800988179723 -0.45989487875272860862 0.17354865990599654957 -0.16258605529267161627 -0.20841820463243587724 0.50368420817249959232 -0.53390862437882802283];
  
  % Layer 2
  b2 = -3.3669315607948062663;
  LW2_1 = [3.1869018112981328805 8.3889329351879489138 -4.6618244984052186197 -10.276907727755181909 1.7556847321018884678 0.63228814503865815588 1.9132780105217068733 -5.3363778286808569717 -13.855286696138286118 3.7931260362466021618];
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = logsig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(2,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Positive Transfer Function
function a = logsig_apply(n)
  a = 1 ./ (1 + exp(-n));
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

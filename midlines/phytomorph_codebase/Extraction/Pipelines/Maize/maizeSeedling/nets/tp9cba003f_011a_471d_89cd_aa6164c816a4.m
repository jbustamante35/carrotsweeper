function [Y,Xf,Af] = tp9cba003f_011a_471d_89cd_aa6164c816a4(X,~,~)
%TP9CBA003F_011A_471D_89CD_AA6164C816A4 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 31-Aug-2017 21:24:59.
% 
% [Y] = tp9cba003f_011a_471d_89cd_aa6164c816a4(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 20xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 1xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [-5466.61789079662;-862.937878923584;-833.978767721889;-1562.45386611791;-692.538815519997;-441.043793232209;-783.667639824725;-311.950474474656;-656.555828069296;-380.16002803684;-256.518565057529;-268.743398235227;-384.146123020683;-242.574763141888;-313.061223281941;-302.32135091468;-227.243600250338;-275.821003918875;-162.786711803937;-155.930294068966];
  x1_step1_gain = [0.000192953812201724;0.000635170113819407;0.0010737117105794;0.000992967389065702;0.00140247416929523;0.00179426803546528;0.00152094087103248;0.00262475201653714;0.00199415494766507;0.00251075910029926;0.00454433874041208;0.00378662000738726;0.00302237737948961;0.00448879604138572;0.00366080733460349;0.00363057230533772;0.00381924645546611;0.00427537582274429;0.00592120551781411;0.00602422138644301];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-1.0222303302365880473;2.2712225880392895583;0.038197834882078673946;-0.12508683914548077154;2.3808359396371097105;1.6765650184472231654;-4.4013478831972001615;1.0203020487284375495;0.67178799572069869406;-1.4008760414068726075];
  IW1_1 = [-0.45747976556233982404 1.3056519995882327478 0.59756892866236621664 0.31336423963662596304 1.1223679850050252149 1.2917194944364798204 -0.22097850466432453209 0.01520322148049426704 -2.0931348900505217792 0.68346102502025107839 -0.36621404051350281428 -0.41179321815275965468 0.31751038896363936725 -0.73782352014480967473 -0.64069574974901011277 -0.74097529098100523015 1.6561508612798614415 -0.3062256037651470697 -0.35334739417840976827 -0.53529046537834312769;0.0022974850884297866489 0.11068575449808802647 0.20648978333185508127 0.54237002304848325185 0.31598006669130873636 -0.28494390598339486287 0.16689534992467974783 0.36123460497758652643 -0.058542435841785304962 -0.34369117052020475844 -0.056222952919760649237 0.39786147334857474567 0.26378635717428988716 0.22832594031113423449 0.47484823156306521508 -0.34892870420443039547 -0.51245156714515294194 -0.0090464409902513628903 -0.23436491732474365457 0.40317650091834456028;0.23357109928310434976 2.3224227179571133028 0.41434188983212094648 0.64974209385965775443 0.99249885806256288312 -1.1192183525853731663 0.64112464179187034219 0.084984970860587802366 -0.7033741395399766283 0.50788094415724960307 0.27967119508627863445 -0.45201798949296773111 -0.10783403227474765151 0.56655592263534049202 -0.36637385303794561819 0.25692630411565287041 -0.60716955476041312156 0.89668456301620103055 -0.26204833920175335527 0.14979839475201470189;-1.792288339190481139 -2.9775374344308591645 2.3379050361467030861 -0.59670952823322864766 2.0630330614097824871 0.36858001600478107473 -0.7472919701049099972 -0.196202492806626827 -2.4787266387246060795 1.4626517165580446012 -1.6603533219810637789 1.5695631901486317705 -1.5792245274495817497 -1.6014722142411050854 -1.0475442670107335541 0.19695091516300264334 -1.1170313140192102974 -1.3266362044996131697 -0.04434119816480784626 1.6182579776193253274;-1.2608791977888571534 5.814724949782831942 -1.5860996121542894066 -2.6734087202481822132 -1.1067238224360811394 0.21899589501023436489 2.0304583275588341529 1.2285410017799793803 3.0810831192058754091 -1.7630538777970263808 1.8054032069793393145 -0.74174965497662137537 -0.04536602125572370553 -1.3062406757274578339 -1.0844720070045532623 0.29978614737858844119 -0.29383896616095489529 0.62783848854957313712 0.60343919987638883207 0.20683117627322594734;2.0949560458109863781 1.7973529236079428539 1.703250039380112657 1.2735944216524366368 2.5912244553882954889 -0.13198919601688874348 0.19945419088233531935 -0.97024686296309103906 -1.4180781956975763158 3.0710632214521087491 -3.186264500594177651 0.8425831127451848257 -2.3428351688848843004 0.34432336292091231256 0.46620990696914577089 -0.44590349179593491424 1.1973867270274689556 0.79474395990850887905 -1.2174064694648090157 0.5005813150546026824;0.74361129169221384938 -3.3501103953293651649 -1.2269578018702904654 1.0007235371714953143 -1.5051064264237898893 -1.4582010937313116816 -1.3935241751080100769 -1.325998485600086374 1.1766136635737856064 -1.0072393633377600963 1.3063349862228361697 0.36204008566688594684 1.2096119539083820538 0.17289717544949187444 0.01371007558762759454 0.27514757674398443443 0.40404057153599565178 -1.5970982843065579804 -0.50852482095332096623 -1.3375064905756204325;3.0864861570806825242 -1.0419427457066325893 1.7709628484360293577 1.2010191371950631467 1.676571015595475167 -0.60303853740431578867 -0.50166481432947529484 -0.71910531362101370867 -2.1065482177896264204 -0.36175736941221242615 -0.78469828461236201811 -0.053045066727078822588 -1.4027956238632610653 0.49610759260355707934 0.6078624826020061489 -0.34578684332565895465 0.087425067276625995083 -3.1165489855056178747 -0.8341231091541928544 -1.0848754951352808096;-0.38856744818250449347 0.81082640617452272913 -0.82151496804586088274 -0.30929442355328429226 -0.38700304486282277594 -0.24171027133118255792 -0.52178515517318391215 -0.10002015356279252145 0.54860306603405006864 -0.10817412941439963348 0.55734595915330731319 -0.27014657465104552347 1.0608653336465001527 -0.51613263204118298155 0.33465356879693403114 -0.15396758664267695682 -0.16662470061057224613 0.54465061092831779099 -0.32692978344924894518 -0.33395911832399149954;-1.5185817745526233313 1.0324604770611889304 -2.3363420203423213017 -0.11590535874410159978 -5.4031663472386579627 0.749242658404435935 2.3528634675571042933 0.93722478841848144704 3.1208753060610572305 -1.7002964860197582464 3.8380076777344749317 -2.2491879856326790765 4.3677788346296955169 1.6118167917371795106 0.36429880102651107654 0.68738178013606043848 1.4031023868039651514 1.7401722464698610171 -0.45181722121635475853 -0.2202929317669784226];
  
  % Layer 2
  b2 = -2.7314907254850466778;
  LW2_1 = [4.2945756002232462478 -2.9845230375964657554 2.3841063693311101979 -5.7167594178729785881 -9.2954576520856182498 -5.369147725525462711 4.8741181402085702601 5.9316214045666457721 0.31754843301948465495 8.0099226978133390986];
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = logsig_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(2,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Sigmoid Positive Transfer Function
function a = logsig_apply(n)
  a = 1 ./ (1 + exp(-n));
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

function [Y,Xf,Af] = fftNN9(X,~,~)
%FFTNN9 neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 05-Apr-2017 18:18:47.
% 
% [Y] = fftNN9(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timsteps
%   Each X{1,ts} = 34xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 5xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [-0.913045608368194;-0.697742834656545;-0.455258159808927;-0.350773478419453;-0.341510968401377;-0.248410410808488;-0.243762824422046;-37.814712419811;-77.2999656218385;-62.8390877603136;-57.7168681955057;-51.385499051545;-47.2718810468394;-46.1304024870307;-0.000809726559050569;-0.0013602606530604;-0.00146328627525471;-0.00149716143554126;-0.00168341702480117;-0.00172499056143884;-0.0017998233406095;-0.00175941655493562;-0.0016824794955839;-0.00155159651777562;-0.00274218173499328;-0.00170684774264013;-0.00194416495593836;-0.0019908864100069;-0.00165754712972382;-0.0019244988146592;-0.00197568557234307;-0.00185938762437786;-0.627345545498438;-0.34284732265719];
  x1_step1_gain = [1.20478154368001;1.48846702877638;2.11403974925536;2.72216108078321;3.77210398358307;4.00022196758165;4.14564743120328;0.0148707154187341;0.0154726242467163;0.0168242951821571;0.0181235150229929;0.0180997867694666;0.0217675800007055;0.0208504828872505;1036.50533353783;712.60385144272;620.397298639487;686.558993024048;573.223015277061;572.320767918306;560.820488988983;579.081244361871;565.000502323487;496.526505772315;468.279565458687;508.707268940091;484.044536626804;477.272852456575;539.679174069141;550.960631602479;506.56584685886;528.513846648502;0.994134475483816;1.89353347440274];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [-1.5751734774744645673;1.2979348113804665132;1.230139272581656007;-1.0898897044761810537;0.82850838291682393777;3.6939573301461758881;0.73445953046018475074;0.58496267291446335523;-0.61559324797843939514;-0.42397712103367046765;-1.5094449843324369009;-0.15519467839779860219;-0.39015966304944615928;0.014944655180052815804;-0.15492176043874114622;0.47565531166823349363;0.46080648495430576173;0.7826246152633737907;2.2573557942704725043;0.78646822951257167045;1.2497201285312249386;1.0401986788982438004;-1.1657969508133136927;-1.8732143133587608741;-1.5314802883163423086];
  IW1_1 = [-0.039892830756495425981 1.1608601873214010602 1.6703460002508829785 -1.2449657457641039038 -2.6767427000464825149 -1.5075445616192331144 -0.8274512814668074645 0.27267670092095691592 0.32400067967455892237 -0.83045234167740000775 0.21361706918188594351 -0.82775022006135823283 0.038007383546842000988 -0.95297444178020862537 0.017550938269044986245 -0.26130359391234764255 -0.46707706133849580254 0.69377813699824131266 1.2444256625858698406 -0.30516797760864594613 -0.53219669160007554432 0.98956309038371059739 -1.1242044071801249316 -0.078676411141970756247 0.17315774836395356195 0.12331827406604042863 -0.4512765357266375621 -0.54221522102836861023 1.1747124692601043083 -0.77967465238570077268 -0.17404577989056849163 0.29545125939506622359 -0.63444164745725195598 0.36860743262971013001;-1.4750406025406568311 -0.28326633571533171851 -0.041703620724757403671 0.59580110295292931788 2.2347074991691151524 0.060195226360406563215 -0.23899174731434733032 0.31276573564339066325 -0.49706711472699760535 0.040621473065800564606 -0.31659805355450798547 -0.19047708019801956603 0.11734532237949538147 -0.11698373749621444884 -1.6563038840835375698 -0.065430158420985568002 0.22908919509668507208 -0.41064361892478085103 -0.36242251084501347913 0.11739528654040856659 0.10430084559952174095 0.25107165757577321052 -0.14254134713181812466 0.13343191275385191119 -0.15671729073474746641 0.25596080170660667763 -0.044775848294036642294 0.54182686859343931474 -0.032663013544481422912 0.1047947216856176117 0.034474733447937701281 0.19521977432044029799 -0.343899358061641236 -0.68426985838799447848;-1.662505551108185875 0.40469019964224939301 0.26410116278041717575 -0.15059755714985972874 -0.41787661516508745052 2.1183365137008682844 -3.1644107474819151982 -0.11707742056157824373 0.11141574622040714693 0.75428181379484404712 -0.39602128629639177237 0.098183196994906837829 -0.0014869483542551428876 -0.10575300130702429413 -0.12345339735886669275 1.1599992923596618155 -0.56309647841454257833 0.29968640017225062211 0.14795742770094974516 -2.3152067350222100828 0.92252170481611683872 -0.20284401030133103472 -0.44558594581074345564 0.2788222189961640507 0.36011703854240273426 -0.12925157402865528056 0.031303840592355365591 -0.23775769992994774671 -0.46465387008675013147 0.31479298325839827344 -0.38082256439077127874 0.35822601086300093209 0.49701721929598691174 0.083462974720852317612;1.049012821819230501 -0.1159608566638073851 -1.1896765193406531047 0.11608049959438652976 0.30464558980514572228 -0.62551987797067443164 0.62803958199905107751 -0.016268657170502257014 0.32084377238474137695 -0.75271268550164505129 -0.35349708328592271966 0.2796097210588405213 0.12728423052182788466 0.24008906803385984818 -0.29262630637708558767 0.047977915127646784954 0.23954317056496246541 -0.85599284639161898891 -0.2514722318046081484 -0.0025475402975211635694 -0.5797158059658140683 0.10576219566622972745 -0.32346338403415259011 -0.43179736395269469051 -0.39505349771411318871 0.97560571768526804792 0.26854312949676695244 -0.5397692871993794439 0.17895110564223198901 0.22238329768848902335 0.14461895166924707001 -0.53968728853153347114 -0.32801579469346087148 0.27993739993172539471;0.063157683171357587026 -0.042638507969263918229 0.4639596919082383808 0.67051868174707618397 0.58607512783298654213 0.46309360328538573537 0.33903332311678868738 0.2364829860179887 0.27695090779750269894 -0.48542704176844841957 -0.22213413826052449962 -0.2416672640345915446 -0.11235453236847536829 -0.31471381384729152364 0.78831714443857503483 -0.28364971947570521982 0.3321518971230835171 -0.81066690125710039183 0.34226635733975407927 0.68656091398354135436 0.45504936886867408674 -0.97883303277597100145 0.24984876140902764763 -0.56376026625852815322 1.0779626915069955295 -0.18457383160385407161 -0.25198679502478377179 0.3500395513323629193 -0.06959748560896802938 -0.46263795946309327345 -0.2155575475175890432 0.57862034083306601584 0.371301646086305559 -0.42005067781216098854;-0.032098942454862902651 0.44134192982922948456 0.39618019951621508135 -0.29713698253113179915 1.1309824504909178344 0.4249142966447541081 -0.56114132159823904011 0.32002589180037677163 0.74061665484189842523 -3.3585606661183700083 0.67105916673173271469 -0.32362784936956451309 0.12143938901311858436 -0.19370244877255607396 -0.21454089214194876911 0.75919238422885593209 -0.36666259882935126058 1.0928239775334642747 0.45065482239319321067 -0.69077114660488581066 0.31496724491524979994 -0.37840512209588267334 0.20096897531663257541 5.4733211459367678842 -10.323871305509253915 14.591491277955144668 -5.1990395075470789976 3.2588644760791920518 -0.65312483056769266021 0.036302321408640182698 0.47937089506284885632 -0.14145403452095706154 -1.5539025835401083508 -0.5552125212378492547;0.63392354723201349564 0.45831099146008863476 0.29778256194718205618 0.58310211826533386859 -1.1212886765962593039 -1.7416496677542843141 0.080432816779114152395 0.20165871688990655297 -0.2028869289986749147 -2.1666697860161914235 -0.21417830539196394679 0.15919011150031653345 -0.2032793942672196652 0.35586326440233834179 -4.2816325479658798869 -0.10358154666277850919 2.0000639976911549489 1.9306999811138705336 -1.0529104503230630741 0.40302370131994219582 -0.83224777383158943245 1.2008863252146870781 -0.65068905924513897876 -0.20537872177782906524 0.37528293265172424364 1.5932633962579234588 0.21279155155325876758 0.5710923175225294246 0.74341248826845729436 0.30884503103035998439 0.64290340364892251124 -0.32773475361640747039 -0.36610446373875765724 -1.4699793678768751093;-0.065527708582829982675 0.51009886436729479087 -0.062326451334088199541 0.24414161934686515187 -0.037742274900742188437 -0.033428126891391983511 -0.046218544654318668985 0.89049036488783872567 0.030744695873296441074 1.2181699291894183546 0.036365395472928899179 0.50525818284348655851 -0.29177070107135033572 -0.24158921467442429076 -0.40008672609954315513 0.3652371033146199486 0.34305466040704607478 -0.49791150869240979882 -0.19405383536512926801 -0.16412070832168665357 0.021414453859709831063 0.66583576633227392616 -0.20268816236990080948 0.43371565292338137843 -1.027407041284754019 1.2805613644883140356 -0.80275612810004615127 1.5602889040019571887 -0.49561193810883619193 0.39855920354703749942 -0.24343560270647057742 0.22687103342281117468 0.0022799920201923926794 -0.38130983889905128992;0.61425991165924520576 0.32074217361707346718 0.45614785469983704091 -0.10195570157956382329 0.40134227750871220852 1.3740175907219238649 0.15791355267592266376 0.090719691893044990261 -0.27768569475512616673 0.26245092277513987211 -0.20458933938826254217 -0.032501104375564901505 0.13110695395557442344 0.079022903710704708868 0.23593946646615690521 1.1362626651732019578 1.0438230654460685098 0.80588190461202358073 -1.3856628171465634747 0.73261326584837715981 -0.14398686316914255379 0.058990859201089297648 0.11536348517149924708 0.0052703710177102094242 -0.21635592887427812503 0.32062379935361451366 -0.20806202497785303285 -0.45925987032002896227 -0.15247306152283396363 0.19619764176716233961 -0.089566090268814915754 -0.073002702074680930755 -0.26026521899581672725 0.36977010271057064728;0.37422973127719816322 0.37462250386958628745 0.43970997628527813683 -0.58836066426344013625 0.47374927125101690129 -0.53160033044326870932 0.74172123085776964224 0.020251558961414631299 0.39886535295231478893 0.53244719664268291837 0.41215634405777940019 0.17097099201697682491 -0.075066095177990704856 0.099746060970318600747 0.33761706220518161725 -0.048288880142027340581 -0.32650273760453629723 -0.17492503233726031109 0.53532674690450310351 0.4058650411501111277 0.55256905619039708988 0.93981818271573158707 -0.41177141049658755323 0.11675373660937404807 0.90116094105557820182 -0.6860730231241806143 0.63398432395197834577 -0.080978160355320752406 0.17071804733284776101 0.28617707501065670073 0.41068183343282255171 -0.31411099140657910977 -0.25245860940949660378 -0.43351382623936823846;0.52047242192911180592 -0.027746782297342700158 -0.56580793086406511172 0.078134122473539818765 -0.57032478858492441365 -0.2121623004300956794 -0.19384548737662490869 -0.40467348468148617302 0.78435537712769143326 3.2104745128923686259 -0.88945219517798657094 1.4189820981375576014 -0.043704166595484067459 -0.20353285610321589227 0.292250808236983739 0.24593726779174848729 0.63075896555974531044 -0.021622292640974288824 0.1498990034611420441 0.027727862842642590074 -0.099801008529924115087 0.66466177339078225117 -0.54449555417247974543 -4.0729738497292080623 2.0554483631211502015 -2.5000412834889833569 0.70376383441830425713 -0.26410848396835284735 -1.0105176861562261692 0.88719004574096449467 -1.0280252146401991364 0.1710201770586247394 -0.27490755280036993646 0.5015436166649576144;0.42644587628978514182 -1.1720532327488515367 -1.5646426946439673245 0.74629011738933070941 -2.8385086794516181108 -0.4065695409944949934 -0.91042765819115645254 0.075881903120987317934 0.25100713652957457045 0.82896804674920088196 -1.002911154241935332 0.21408023917768032041 0.034973445200272838818 0.023825477100333117969 1.3866573645908819579 -0.88242350694330717875 0.0071859367628352207452 -2.8386912050769432803 -0.4070531336041782744 -0.40034879672533640882 -0.58103488681276371786 1.8728082256871878553 -2.6947694062668539061 0.3110027834493902521 -0.79721317856148010694 -0.80664132066441196489 1.1999876150893624693 -0.46045394932826122503 0.50968386441261004371 0.11092840388478535096 -0.22706814421734636267 0.20795731817054396995 2.8637044731548115806 -0.75936686878796322286;0.4171699461284316679 -1.2016216311227729818 0.3303105173515634152 -0.23175492796227112335 0.84616088819249213326 -1.8147246318886218752 0.7969396819070597715 0.36446890667157189059 -0.50774472454056285287 0.11516796351908924201 -1.1470904414215330469 0.69070169737610120908 -0.16660402084376657594 0.63816896092297614729 -0.17953342252612691787 -0.16107691025734535706 0.29106393602778851681 -1.3047946249470969704 -0.84937990959432430049 0.43143342994088978992 -1.3641877363849976845 0.033834028844333140229 -0.62353150364618425971 0.44654779248101222899 -0.51954695228260894257 0.6225652021135218428 0.38313080001205213065 -0.11028426129086844887 -0.35857245831508105516 0.53544012468889579104 -0.41513909372340523918 0.1774764222094707411 0.01463485469942650552 -0.38424911701530067853;-1.2365824006789227774 -0.75577247461171859211 0.71529107878672371079 0.13767820592911356181 -1.1556179411057505568 0.5877794213214218022 -0.92343303443855528911 0.22887498300421385555 0.13982029929519379507 0.29113878157106015676 0.38224376342906418724 -0.090139450743522891996 -0.13745290896653564183 0.15887471899528410324 1.3043909918945251203 1.5732859812801665012 0.17456633900975776497 2.252270168936855832 0.20089202340512146705 -1.0860620228226895989 0.9136771925063059685 -1.0664863245513711565 1.2688647537810660015 0.15513846576715778491 1.0192875123626743417 -0.680047473297539673 0.50490905626358983938 -0.19616385011851486531 0.16915233500627918639 0.10556607016096088147 0.32859528978841001656 -0.015196531486090651339 1.2862717657340327904 0.14040074727744253358;-0.35568532183506490485 -0.043551552481652849869 -0.33570454473079236468 0.28137026401649473106 -0.56168851825802335043 -1.1578148060693262966 0.37438373171914424153 -0.1528719041561261982 -0.31168042282550151301 0.29084327190648895378 0.36832061317975423043 0.45982938822807445378 -0.24065103074923843707 0.44012230213167113924 -0.14914819728611172778 -0.22829201488644171314 0.6875464978489734813 -0.74702642970573418513 -0.55320995763490199426 0.46638038267588532992 -0.37264411979583755841 0.061724713847738116312 -0.12035248901727041426 -0.5333501592922036405 0.81331692575803338219 -0.45920718099225088515 0.27095329553837216308 -0.097110396799738346596 -0.30388794070566571559 0.42726353442304498831 0.096819370340938792907 -0.3583743667401270705 -0.35819800476697655212 -0.51411495032020249063;0.34867583263264684268 -1.2756232426877300856 0.54447995134689464169 0.80999039646262682712 0.062445781844254012738 -0.59252451352489565739 1.7399302054009047058 -0.533379190512278889 -0.33430750399696934627 0.59140531794224104889 0.48100512702596831538 -0.080731081372171428767 -0.095887795426525715414 -0.25051934383332752354 1.0069844007065347213 0.89900861607044246782 0.16445251927245843615 -1.024680036179117959 -0.89098547370592429129 0.78977801997643515275 0.30131566113161417642 -1.2184259802463246469 -0.15421358281179795013 0.26265008224645453039 0.32963927612209575901 -0.36246686018477231039 0.025016061435125986484 0.24077657235702235039 0.29640659763024324036 -0.037591264269838040035 0.20273101594417813898 0.30399108414423475777 0.44064129669124740829 0.24849949898621753741;-0.44153964388519606477 0.089087634246427335749 0.75948029654424475954 -0.016798144083449990938 0.21190878754771627634 0.35481426102873653283 -0.33368597227182550391 0.6143831591932873426 0.1748212814918138347 -1.3821506722804237643 0.083042404092113969449 -0.091210295791826795364 0.048365101926933613818 -0.016139975647820284377 -0.36764594031732911183 -0.008214159571686797251 -0.51444553807441817384 0.79010488755972296815 -0.017835158733210846466 -0.09365882053180449307 0.18995543904673850566 -0.17140802976557015236 0.23628856737967271484 2.4058178798174236768 -4.3623629105800683092 6.2287241733161149426 -2.0434533861211097161 1.5483250200826368381 -0.2976380131152618902 0.1505850636392432329 0.16013090838359403389 -0.005592587159590892143 0.055939354587918051209 -0.41931177343849357353;0.45096641794139502579 0.68219521340835798107 -0.22748504422822368731 -0.28372066592375239091 -0.23358832011664754091 0.6233660134831615629 -0.88953728041248780745 0.00093002948114481612338 0.38286678091570747196 0.21860269364716197749 0.41390809034461029103 -0.12431798687250718294 0.019166507215433947753 0.42516408357716928279 -0.37015563001107848473 -1.4087207212032504255 0.21010398906423791154 -0.61571386891897372795 -0.7078861012097447114 0.20500510616911549189 -0.90288445106187686928 1.3082541052695870754 -1.7670992909450524699 0.085763519127656451246 0.066214114035833979144 -0.41703354233762623959 -0.031066887426197047767 -0.055803769007165812677 -0.11810353861507300044 -0.31223195081532106876 0.51366055381817565806 -0.27130343442986104563 -0.41984081556169883243 -0.12014255788606265085;-0.34717945050907134119 1.5835900596768024418 2.1443371664984733904 -3.6398591471746679638 0.39245943589064991031 0.27029285401445407588 0.20565825173025981121 0.25817246053574854914 -0.16335200898315360707 -3.6021703650695280352 0.61771119447250200096 -0.31717874475285579017 0.11680448770161598604 -0.073238761792541018369 0.71347163498989296659 0.64800160195564515675 -2.6433299295377650218 0.43365695067104781391 2.752205865530281681 -1.3101330601034641976 0.65418818890466279292 -0.35307177397127992302 0.76710389214251428758 2.746851834003638082 -7.9865667433372040662 11.359958858462107401 -4.618998137190069464 2.714551665469415731 -0.88052389062175928647 -0.15577081721201083142 0.37582674174464009154 -0.16884423499666498247 -1.2141128719316576223 0.1850241205841197667;-0.1207883496383792693 0.30120218794327408007 0.21915182385151951716 -0.019944887899665593445 -0.25168191470433787238 -0.28418065708566492278 -0.39527720222176354614 0.10341631058829640899 0.14118384073998907491 0.64934814808099639016 -0.046559735227544252201 0.41746459767512106298 -0.14559518300640705846 0.28276646406806271727 -0.13672804424728929318 0.056537494815489496014 0.11883332393121559534 0.40625042189116317148 0.20741424734262153828 0.13776469639751895424 0.30559135507449136648 0.35237078966118851042 -0.20719962561989990757 0.67342996059433113398 -0.4259339260357236645 0.61463695719737154732 0.33826442225592878721 0.029498415678810663981 -0.24164192104677384432 0.50271454593131792432 -0.076630505285550820638 -0.30926062752464678063 0.23720877250185049001 -0.12356191007304996587;-0.14060400570793474273 0.007164421907622904595 0.21745402436674385327 -0.6414426869129568054 0.067011077212534728154 -0.060097472074588903501 0.27267357174296241729 0.7958268878612934083 0.28327631998690366855 -0.49192063850260131508 0.13586938225489839094 -0.089747500584188288908 0.050603550879780544169 0.0052636247053663050288 0.17507183811230617176 0.047203961051857500075 -0.20794686112785670806 -0.16366407908191360487 0.5006233393313225255 -0.073958898128049233023 0.083375183982572556585 -0.047234053122936429936 0.20236776660686647822 1.3472235850728315754 -2.113776599232449982 3.1058279678635436483 -1.0494765433346493477 0.67142588164502170489 -0.21727679009236341989 0.047660442403465098915 0.10116119733707970574 -0.0035624488323010039016 -0.35868926059013600538 -0.17080137027954811479;-0.11491016805775007559 -0.18518745437319583669 0.042045896191708148626 -0.39073263950051140281 1.754445915277288659 0.033295043727833081859 0.90591810416329232591 -0.11138325889113259715 -0.53660210248157758084 0.87319349592897366197 0.61850201630466661307 -0.33552024052772644325 0.10076880306803304155 -0.01365840391727339391 -1.1871733908802533097 0.51019830946009292472 -0.044634085011184376768 1.8297051377419846219 0.29486908699707869985 -0.031424288615068213248 0.90530912648402273035 -0.34731401616472135085 0.71345829090114110116 0.2158036130969561428 0.37846236244328829157 -0.6076699596983220486 -0.35385711324791913057 -0.015372647332015305574 -0.29374566265356188977 0.24038420558332729282 0.12338337035670915443 0.3422457085070748084 -0.79498283072070130562 -0.29873548161683510793;0.33110580431571706717 -0.79185404593776387294 -0.50208144625743167389 0.50216100894462900595 -0.053799214268507263015 -2.0436128614179414065 -0.32695266824390811777 -0.19633373880411322809 0.56958278366038816998 0.0079019236967588692838 -0.10612945746671868796 0.1983580858622349119 -0.062748674200453283256 -0.2492619748847646477 -0.40562097883328596115 -0.38278495824985470097 0.13341305069451497856 -0.68016053506051099564 0.21761919806549731571 -0.34132723309698381753 -1.149666224721680452 0.42846562236379875932 -0.18950535819366845502 -0.071838933795749015943 0.90350132388956749807 -0.50983346818052355243 0.46646573694711557234 -0.57224988096239981505 0.49763326650458983291 -0.024510942853911178718 -0.26733777422047905192 0.37302541750990597658 0.16091286181412040035 -0.73880807574139717442;-0.3089540395179508625 0.2146514221881431761 0.4381198322620457053 0.18686054060319107206 0.44822377920341538449 0.88634665849495297696 -1.1322247460613730219 -1.9232005835368504165 1.1434414119715010649 3.2849497415875701378 -2.1618230300290597334 2.5032082879758039695 -0.097996992457497364426 -0.36062833294248630711 -0.44571015209695352688 0.18535012249992924294 0.2170435549161235933 1.1238550978793206969 -0.10142395678516367974 -0.75938794956833854943 0.42173337091922968867 -0.42899671480446438521 0.24613279258847781117 -8.0554419355191857477 3.0491167577843896197 -2.4953394107578059646 0.88209640156262592026 -0.38577919863858017857 -1.5153076423991465038 1.4324011007991113154 -1.7469427636487053768 0.46775825386398794947 -0.28176339531041083575 0.49475235752139967715;0.66246898153015898458 0.36636138260212564033 -1.8449147728712043115 0.28175864057823662989 3.1126797006729098882 -0.23228684479849648348 2.2371782572686549351 -0.053865659237526432312 -0.067935457170023472173 0.051066843884849194568 0.38019682878529953429 0.062526940772587191741 -0.017991319255452623005 0.0027338860883769277796 -1.3671614265527511911 0.30011167013910200474 -1.7401434291301101087 -2.1230134177020163477 -0.12194293631157684943 0.44607988252929847706 -0.55588989555001888654 -1.2307549789519769412 0.862920819369259684 -0.35634806841054417204 -1.4152097459929127155 0.67261526647415292857 -1.0181112641093863491 -0.0069245019620054063317 -0.57789885139502816802 -0.12860598910392026517 -0.10059422447794864885 -0.35626139705761700194 0.86232640986754538481 1.1713138526082904622];
  
  % Layer 2
  b2 = [-0.5195555483206847347;-0.41279238142644614218;0.55943987255164218109;0.81921397655748795508;0.52156141886139173458];
  LW2_1 = [-0.84178938697159089166 -0.34296826411136288604 -1.0385572687090671717 4.5789734017185397263 0.46602984140369541066 -12.811635607841305173 1.0105052423494149672 -1.3429845746263933126 -0.62177674512237557369 0.89998426919200669172 1.233587604151763939 0.89605765691881456014 -0.62295496355443658043 -0.86424502313110551643 0.71677695372023098042 0.58766876533083189926 -6.3193329066692802698 0.89588991814340224185 -0.21986077752792965168 -4.0646145101947581679 -0.058939348025407879705 -0.77022664300259879866 0.46516682313811313909 0.52234353200351812951 4.6874422524103227516;-0.83202112845518827466 1.9142794065927610792 2.1820033736626132104 -0.66424848407522008031 0.15566822775001820656 1.337294428845774874 0.053664452551500249622 -1.3613173014214303702 0.9222891133441901701 -0.96775332086857057678 1.2969235731497363862 -0.95682728822951434999 -0.75453158895119143423 0.10054273145347479568 -0.99699700331002649722 -1.0118674708907613446 0.034611733306047269554 -0.56306724340530611705 3.5038597066587504614 0.92513207915424411354 -5.0089888242652014227 3.1546550532678572232 -0.18457156182843365011 0.7004792865320398354 -1.772053906761260178;1.3653903210311426619 0.44602267578867627051 -0.16804156811895432089 0.53709483025507265275 0.37155521512678507667 1.586462126662859351 -0.92756171697229228279 -0.091036884984659324771 0.91365917704305277258 1.1716264940458904764 -6.7134928893839100894 -0.86628190201492605294 1.1217564054064579349 1.5644409960845091501 -3.4049705856712968455 -0.56990385006959576319 -0.75346271021514066302 0.18541015152264739285 3.0205002632557316211 1.7332468036595534144 -4.7835814990099549959 1.9993741766299679696 1.6899873433677701229 3.577063687139480308 -1.0203129966841091303;0.57577012282714468139 0.53151545957434043199 -0.72237563026187312509 -1.3568706216474304416 -1.0852994501937458516 3.0694191531485026658 0.94004884193482007859 -0.69207957367378014624 -0.42653708601725448535 -1.4046937480100789575 1.0704229765395447682 1.2657417740836935938 -0.51954974218594729418 -0.85319683312018068655 -0.60109571533991457137 0.47914005021137262563 -4.9901291157640255136 0.74183042306602942073 -6.1959890049513699495 0.52618018725185999873 20.440768516930265974 0.66577385390697585432 -0.39134739709170757171 0.79127650298650764604 2.0608059353383003653;0.77223570481421599521 0.48735859393660185823 -0.65246678239844202452 0.69591452679698573291 0.57695730099578257377 1.2271148935983764439 -1.2472178308631622912 -1.0759613538699079882 1.0164695557847707175 2.2496883458734582284 0.13970078606909333563 -1.6044513906891795241 1.242017710146849252 1.613293834642620217 -2.5030597931808218348 -0.48010188341238391185 -0.1607446273758992572 -0.20827772368038083295 3.4709324968453580951 0.054524052363015100553 -4.4269237213881709181 -1.1090131581203066524 1.4502284345451310621 8.7733489344417279199 -1.2726150700829741425];
  
  % ===== SIMULATION ========
  
  % Format Input Arguments
  isCellX = iscell(X);
  if ~isCellX, X = {X}; end;
  
  % Dimensions
  TS = size(X,2); % timesteps
  if ~isempty(X)
    Q = size(X{1},2); % samples/series
  else
    Q = 0;
  end
  
  % Allocate Outputs
  Y = cell(1,TS);
  
  % Time loop
  for ts=1:TS
  
    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);
    
    % Output 1
    Y{1,ts} = a2;
  end
  
  % Final Delay States
  Xf = cell(1,0);
  Af = cell(2,0);
  
  % Format Output Arguments
  if ~isCellX, Y = cell2mat(Y); end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n)
  nmax = max(n,[],1);
  n = bsxfun(@minus,n,nmax);
  numer = exp(n);
  denom = sum(numer,1); 
  denom(denom == 0) = 1;
  a = bsxfun(@rdivide,numer,denom);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end
